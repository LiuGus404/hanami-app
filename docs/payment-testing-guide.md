# 支付系統測試指南

## 🧪 測試步驟

### 1. 課程報名支付測試

#### 訪問頁面
- 地址: http://localhost:3000/aihome/course-activities/hanami-music/register
- 登入後進入課程報名流程

#### 測試截圖上傳支付
1. **完成前面步驟** - 課程性質、選擇課程、小朋友資料、日期時間、聯絡方式
2. **進入支付方法步驟** - 步驟 5: 支付方法
3. **選擇截圖上傳** - 點擊「上傳付款截圖」選項
4. **檢查上傳區域** - 應該顯示檔案上傳區域
5. **上傳測試圖片** - 選擇一張圖片檔案
6. **點擊上傳按鈕** - 點擊「上傳付款截圖」
7. **檢查結果** - 應該顯示上傳成功訊息

#### 測試 Airwallex 支付
1. **選擇 Airwallex 支付** - 點擊「Airwallex 線上支付」選項
2. **檢查支付說明** - 應該顯示支付說明和按鈕
3. **點擊支付按鈕** - 點擊「在新視窗中打開 Airwallex 支付」
4. **檢查新視窗** - 應該彈出新視窗打開 Airwallex 支付頁面
5. **測試支付流程** - 在新視窗中完成或取消支付
6. **檢查返回結果** - 視窗關閉後應該返回支付結果

### 2. 支付系統整合測試

#### 訪問測試頁面
- 地址: http://localhost:3000/aihome/test-payment-integration
- 專門的支付系統測試頁面

#### 功能測試
1. **調整測試參數** - 修改支付金額和說明
2. **測試截圖上傳** - 完整的截圖上傳流程
3. **測試 Airwallex 支付** - 完整的新視窗支付流程
4. **檢查控制台** - 查看詳細的日誌訊息

## 🔍 預期行為

### 截圖上傳支付
- ✅ 選擇後顯示上傳區域
- ✅ 支援拖拽上傳
- ✅ 檔案類型驗證
- ✅ 上傳進度顯示
- ✅ 成功/錯誤訊息

### Airwallex 支付
- ✅ 選擇後顯示支付說明
- ✅ 點擊按鈕打開新視窗
- ✅ 新視窗顯示 Airwallex 支付頁面
- ✅ 支付完成後自動關閉視窗
- ✅ 返回支付結果到原頁面

## 🚨 故障排除

### 如果截圖上傳區域沒有顯示
1. 檢查是否選擇了「上傳付款截圖」
2. 檢查 `showPaymentActions` 是否設置為 `true`
3. 檢查瀏覽器控制台是否有錯誤
4. 重新載入頁面

### 如果 Airwallex 新視窗沒有打開
1. 檢查瀏覽器是否阻擋了彈窗
2. 允許彈窗並重試
3. 檢查 Airwallex API 是否正常
4. 檢查環境變數是否正確配置

### 如果支付按鈕沒有反應
1. 檢查網路連接
2. 檢查 API 端點是否正常
3. 檢查瀏覽器控制台錯誤
4. 檢查 Supabase 連接

## 📊 測試檢查清單

### 基本功能
- [ ] 支付方法選擇正常
- [ ] 截圖上傳區域顯示
- [ ] 檔案選擇和驗證
- [ ] 上傳進度顯示
- [ ] Airwallex 新視窗打開
- [ ] 支付流程完整

### 錯誤處理
- [ ] 檔案類型錯誤提示
- [ ] 檔案大小超限提示
- [ ] 網路錯誤處理
- [ ] API 錯誤處理
- [ ] 用戶友好錯誤訊息

### 用戶體驗
- [ ] 動畫效果流暢
- [ ] 載入狀態清晰
- [ ] 成功訊息明確
- [ ] 錯誤訊息有用
- [ ] 響應式設計正常

## 🔧 開發者工具

### 瀏覽器控制台
- 查看詳細的支付流程日誌
- 檢查 API 請求和響應
- 監控錯誤訊息

### 網路標籤
- 檢查 API 請求狀態
- 監控檔案上傳進度
- 查看響應數據

### 應用程式標籤
- 檢查 Supabase Storage
- 查看支付記錄
- 驗證資料庫更新

---

**版本**: 1.0.0  
**最後更新**: 2024年12月19日  
**狀態**: ✅ 準備測試
